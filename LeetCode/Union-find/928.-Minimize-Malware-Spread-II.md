
```python  
class Solution:  
    def minMalwareSpread(self, graph: List[List[int]], initial: List[int]) -> int:  
        def find(x):  
            nonlocal uf  
            uf.setdefault(x, x)  
            if uf[x] != x: uf[x] = find(uf[x])  
            return uf[x]  
        def union(x, y):  
            uf[find(x)] = uf[find(y)]  
              
        initial.sort(reverse=True)  
        ret, safe = None, 0  
        for removed in initial:  
            uf = {}  
            for u, row in enumerate(graph):  
                for v, state in enumerate(row):  
                    if removed not in [u, v] and state == 1:  
                        union(u, v)  
              
            subset_safe = {s: True for s in set(uf.values())}  
            subset_cnt = Counter()  
            for u in range(len(graph)):  
                if u != removed:  
                    subset_cnt[find(u)] += 1  
            for u in initial:  
                if u != removed:  
                    subset_safe[find(u)] = False  
              
            safe_cnt = sum(val for key, val in subset_cnt.items() if subset_safe[key])  

            if safe_cnt >= safe:  
                safe, ret = safe_cnt, removed  
        return ret  
                  
```

